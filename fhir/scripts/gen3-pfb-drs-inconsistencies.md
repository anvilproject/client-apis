# Issues/questions with gen DRS export

## PFB appears to have duplicate records

* Steps to reproduce
  * Export all projects from gen3 as PFB
  ![image](https://user-images.githubusercontent.com/47808/98405327-ec463b00-2020-11eb-927d-b9901df687b8.png)
  * read avro, assert id unique
```
>>> from fastavro import reader
>>> ids = {}
>>> path = "/Users/walsbr/Downloads/export_2020-11-05T23_26_49.avro"
>>> with open(path, 'rb') as fo:
...     for record in reader(fo):
...         assert record['id'] not in ids, record
...         ids[record['id']] = None
...
Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
AssertionError: {'id': '0013c887-cc52-4aee-86cc-73cfc7b1fc24', 'name': 'sequencing', 'object': {'alignment_method': None, 'analyte_type': None, 'capture_region_bed_file': None, 'data_processing_pipeline': None, 'date_data_generation': None, 'experimental_strategy': None, 'exome_capture_platform': None, 'functional_equivalence_standard': None, 'library_prep_kit_method': None, 'reference_genome_build': None, 'seq_filename': None, 'sequencing_assay': None, 'data_format': 'svs', 'data_type': 'Histology', 'data_category': 'Imaging', 'nucleic_acid_isolation_batch_id': None, 'nucleic_acid_isolation_batch_type': None, 'date_nucleic_acid_isolation': None, 'genotype_expression_batch_id': None, 'date_genotype_expression': None, 'genotype_expression_batch_type': None, 'flagged_for_removal': None, 'flagged_sample_remarks': None, 'analysis_freeze': None, 'gtc_file_name': None, 'end_2_mapping_rate': None, 'chimeric_pairs': None, 'intragenic_rate': None, 'number_of_gaps': None, 'mapping_rate': None, 'exonic_rate': None, 'five_prime_50_base_normalization': None, 'gene_detected': None, 'unique_rate_of_mapped': None, 'three_prime_50_base_normalization': None, 'read_length': None, 'mean_coverage_per_base': None, 'end_1_mismatch_rate': None, 'fragment_length_stddev': None, 'estimated_library_size': None, 'mapped': None, 'intergenic_rate': None, 'rrna': None, 'total_reads': None, 'failed_vendor_qc_check': None, 'mean_coefficient_of_variation': None, 'transcripts_detected': None, 'mapped_pairs': None, 'cumulative_gap_length': None, 'gap_percentage': None, 'unpaired_reads': None, 'intronic_rate': None, 'mapped_unique_rate_of_total': None, 'expression_profiling_efficiency': None, 'mapped_unique': None, 'end_2_mismatch_rate': None, 'end_2_antisense': None, 'alternative_aligments': None, 'end_2_sense': None, 'fragment_length_mean': None, 'end_1_antisense': None, 'split_reads': None, 'base_mismatch_rate': None, 'end_1_sense': None, 'end_1_percentage_sense': None, 'end_1_mapping_rate': None, 'number_covered_5_prime': None, 'rrna_rate': None, 'duplication_rate_of_mapped': None, 'end_2_percentage_sense': None, 'file_name': 'GTEX-17HHY-2926.svs', 'file_size': 235492727, 'file_format': None, 'md5sum': 'cb30a3eb3e907e5ef8bcb0fbd57c67b6', 'object_id': 'dg.ANV0/a3868051-d97a-4b14-aaa6-fad0d6b2487a', 'file_state': 'registered', 'error_type': None, 'ga4gh_drs_uri': None, 'submitter_id': 'GTEX-17HHY-2926.svs_HISTOLOGY', 'state': 'validated', 'project_id': 'CF-GTEx', 'created_datetime': '2020-07-08T23:43:39.964483+00:00', 'updated_datetime': '2020-10-16T19:48:21.597994+00:00'}, 'relations': [{'dst_id': '1f6df5b5-eac5-4471-9ee3-18dcb7210058', 'dst_name': 'sample'}]}
```

## Sequencing and DRS uri are inconsistent/missing

![image](https://user-images.githubusercontent.com/47808/98406506-f1a48500-2022-11eb-90c5-c8583939921d.png)

* example: sequencing missing drs
```
{"id": "ff401462-8723-4650-8024-dd0fe5baa90b", "name": "discovery", "object": {"alt": "A", "chrom": "7", "gene": "CLCN1", "gene_class": "Known", "hgvsc": "c.1063G>A", "hgvsp": "p.Gly355Arg", "inheritance_description": ["Autosomal recessive (homozygous)"], "pos": 143331312.0, "ref": "G", "significance": null, "sv_name": null, "sv_type": "Unknown", "transcript": "ENST00000343257", "variant_genome_build": null, "zygosity": "Heterozygous", "submitter_id": "TOP_FMAL050_03_1_discovery#1", "state": "validated", "project_id": "CMG-Broad-pre-release-HMB-MDS", "created_datetime": "2020-10-19T20:54:12.805301+00:00", "updated_datetime": "2020-10-19T20:54:12.805301+00:00"}, "relations": [{"dst_id": "96374d24-1056-488f-9c50-1d243e63bbe1", "dst_name": "sample"}]}

{"id": "fdc7ed55-f528-4f48-a506-40909eb609d2", "name": "discovery", "object": {"alt": "A", "chrom": "19", "gene": "NPHS1", "gene_class": "Known", "hgvsc": "c.320C>T", "hgvsp": "p.Ala107Val", "inheritance_description": ["Autosomal recessive (compound heterozygous)"], "pos": 35851340.0, "ref": "G", "significance": null, "sv_name": null, "sv_type": "Unknown", "transcript": "ENST00000378910", "variant_genome_build": null, "zygosity": "Heterozygous", "submitter_id": "HIL_A5268_12_1_discovery#1", "state": "validated", "project_id": "CMG-Broad-DS-KRD-RD", "created_datetime": "2020-10-19T20:37:26.328612+00:00", "updated_datetime": "2020-10-19T20:37:26.328612+00:00"}, "relations": [{"dst_id": "53e36012-9ebe-4599-a1f0-c1e95b422761", "dst_name": "sample"}]}
```

## CMG missing expected terra workspaces

![image](https://user-images.githubusercontent.com/47808/98408136-91631280-2025-11eb-80e4-43c1d51f6ec9.png)


## CCDG missing `anvil_project_id`

![image](https://user-images.githubusercontent.com/47808/98408351-e2730680-2025-11eb-8abe-859a327fb16e.png)


## Inconsistent subject participant and submitter ids

* unexpected `_subject` suffix on submitter_id
* missing participant_id for CCDG projects

![image](https://user-images.githubusercontent.com/47808/98409541-ea33aa80-2027-11eb-94d6-182d84371aae.png)

## CCDG project import appears incomplete

subject count

actual 7392
expected 136008

expected anvil workspaces
```
ANVIL_CCDG_BROAD_AI_IBD_DALY_NIDDK_CHO_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_ITAUBG_DS_EPI_NPU_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAMGH_MGBB_HMB_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USACRW_EPI_ASZ_MED_MDS_WES
ANVIL_CCDG_WASHU_CVD_EOCAD_BIOME_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_CHUNG_ASD_EXOME
ANVIL_CCDG_BROAD_CVD_EOCAD_TAICHI_WGS
ANVIL_CCDG_BROAD_AI_IBD_BRANT_DS-IBD_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_AC-BOSTON_ASD_EXOME
ANVIL_CCDG_FREEZE2_VCFAGGREGATION
ANVIL_CCDG_WASHU_AI_T1D_T1DGC_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_AUSAUS_EPI_BA_ID_MDS_WES
ANVIL_CCDG_BROAD_AI_IBD_NIDDK_DALY_SILVERBERG_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_FINKPH_EPIL_CO_MORBIDI_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_DEUUTB_HMB-NPU-MDS_WES
ANVIL_CCDG_BROAD_CVD_AFIB_PENN_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAUPN_MARSH_GRU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_BELULB_DS-EP-NPU_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_VERMEIRE_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_LATTIG_ASD_EXOME
ANVIL_CCDG_BROAD_NP_EPILEPSY_TURBZU_GRU_WES
ANVIL_CCDG_WASHU_CVD_EOCAD_HARVARD-COSTA-RICA_WGS
ANVIL_CCDG_WASHU_CVD_EOCAD_WASHU-CAD_GRU-IRB_WGS
ANVIL_CCDG_BROAD_CVD_EOCAD_VIRGO_WGS
ANVIL_CCDG_BROAD_CVD_AFIB_AFLMU_WGS
ANVIL_CCDG_BROAD_CVD_AFIB_GENAF_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_DEUUPM_HMB_MDS_WES
ANVIL_CCDG_WASHU_CVD_EOCAD_METSIM_WGS
ANVIL_CCDG_BROAD_CVD_AFIB_JHU_WGS
ANVIL_CCDG_BROAD_CVD_AFIB_MPP_WGS
ANVIL_CCDG_WASHU_CVD_EOCAD_FINLAND-CHD_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_PUURA_ASD_EXOME
ANVIL_CCDG_NYGC_NP_ALZ_LOAD_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_GBRSWU_CARDI_NEURO_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_FRALYU_HMB_WES
ANVIL_CCDG_NYGC_NP_AUTISM_SSC_WGS
ANVIL_CCDG_BROAD_AI_IBD_DALY_FAUBION_SHARE_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_CHEUBB_HMB_IRB_MDS_WES
ANVIL_CCDG_WASHU_CVD_EOCAD_PENN_WGS
ANVIL_CCDG_NYGC_NP_AUTISM_ACE2_DS-MDS_WGS
ANVIL_CCDG_BROAD_AI_IBD_NIDDK_DALY_BRANT_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_BELATW_GRU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_HKOSB_GRU_WES
ANVIL_CCDG_BROAD_CVD_AFIB_MGH_WGS
ANVIL_CCDG_NYGC_AI_ASTHMA_GALA2_WGS
ANVIL_CCDG_BROAD_AI_IBD_DALY_NEWBERRY_SHARE_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_GBRUNL_GRU_WES
ANVIL_CCDG_BROAD_MI_BRAVE_GRU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_ITAUMR_GRU_NPU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_LTUUHK_HMB_NPU_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAUPN_GRU_NPU_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_PEKOW_SHARE_WES
ANVIL_CCDG_BROAD_AI_IBD_MCGOVERN_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAUPN_MARSH_GRU_NPU_WES
ANVIL_CCDG_WASHU_CVD_EOCAD_BIOIMAGE_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_IRLRCI_GRU_IRB_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_MCCAULEY_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_DEUULG_GRU_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_LEWIS_CCFA_WES
ANVIL_CCDG_WASHU_PAGE
ANVIL_CCDG_BROAD_NP_EPILEPSY_AUSRMB_DS-EAED-MDS_WES
ANVIL_CCDG_BROAD_AI_IBD_CHO_WGS
ANVIL_CCDG_NYGC_NP_AUTISM_SAGE_WGS
ANVIL_CCDG_BROAD_SPALLETTA_HMB_NPU_MDS_WES
ANVIL_CCDG_BROAD_AI_IBD_NEWBERRY_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_DEUPUM_HMB_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USACCH_DS_NEURO_MDS_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_MENASHE_ASD_EXOME
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_AGRE_ASD_EXOME
ANVIL_CCDG_BROAD_NP_EPILEPSY_GHAKNT_GRU_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_DOMENICI_ASD_EXOME
ANVIL_CCDG_BAYLOR_CVD_HEMSTROKE_ERICH_WGS
ANVIL_CCDG_NYGC_NP_ALZ_EFIGA_WGS
ANVIL_CCDG_BROAD_AI_IBD_DALY_KUPCINSKAS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_ITAIGI_GRU_WES
ANVIL_CCDG_BAYLOR_CVD_EOCAD_SOL_WGS
ANVIL_CCDG_BAYLOR_CVD_AFIB_BIOVU_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_TASC_ASD_EXOME
ANVIL_CCDG_BROAD_CVD_AF_BIOVU_HMB_GSO_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_LEBABM_DS_EPILEPSY_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_PASSOS-BUENO_ASD_EXOME
ANVIL_CCDG_BROAD_NP_EPILEPSY_TURIBU_DS_NEURO_AD_NPU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_FINUVH_HMB_NPU_MDS_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_AGRE-FEMF_ASD_EXOME
ANVIL_CCDG_BROAD_AI_IBD_DALY_BERNSTEIN_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_CONTROL_NIMH_ASD_EXOME
ANVIL_CCDG_BROAD_NP_EPILEPSY_USABCH_EPI_MUL_CON_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_CZEMTH_GRU_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_LOUIS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_CANUTN_DS-EP_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_ITAUMC_DS_NEURO_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_LEBABM_GRU_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_RENIERI_ASD_EXOME
ANVIL_CCDG_BROAD_AI_IBD_DALY_CHUNG_GIDER_WES
ANVIL_CCDG_FREEZE2_VCFS
ANVIL_CCDG_BROAD_NP_EPILEPSY_HKGHKK_HMB_MDS_WES
ANVIL_CCDG_BROAD_NP_AUTISM_STATE-SANDERS_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_BARBOSA_ASD_EXOME
ANVIL_CCDG_BROAD_AI_IBD_NIDDK_DALY_DUERR_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_DEUUKL_HMB_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_HERMAN_ASD_EXOME
ANVIL_CCDG_WASHU_CVD_EOCAD_BIOVU_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_DEUUKB_HMB_NPU_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_CYPCYP_HMB_NPU_MDS_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_PALOTIE_ASD_EXOME
ANVIL_CCDG_BROAD_CVD_AFIB_INTERMOUNTAIN_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_KOLEVZON_ASD_EXOME
ANVIL_CCDG_BROAD_NP_EPILEPSY_AUSAUS_EP_BA_CN_ID_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAFEB_GRU_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_HERTZ-PICCIOTTO_ASD_EXOME
ANVIL_CCDG_BROAD_NP_EPILEPSY_AUSAUS_EPIL_BA_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_TWNCGM_HMB-NPU-ADULTS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAUPN_RADER_GRU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAMGH_HMB_MDS_WES
ANVIL_CCDG_NYGC_NP_AUTISM_TASC_WGS
ANVIL_CCDG_WASHU_CVD_EOCAD_EMORY_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_USACRW_DS_EP_MDS_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_XAVIER_SHARE_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_KENKIL_GRU_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_MOAYYEDI_IMAGINE_WES
ANVIL_CCDG_BROAD_CVD_AFIB_UCSF_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAEGP_GRU_WES
ANVIL_CCDG_BROAD_AI_IBD_MCCAULEY_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_PERICAK-VANCE_ASD_EXOME_
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_WEISS_ASD_EXOME
ANVIL_CCDG_BROAD_DALY_IGSR_1KG_TWIST_WES
ANVIL_CCDG_BROAD_AI_IBD_KUGATHASAN_WGS
ANVIL_CCDG_NYGC_NP_AUTISM_ACE2_GRU-MDS_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_USACRW_DS_SEIZD_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAMON_GRU_NPU_WES
ANVIL_CCDG_BROAD_CVD_EOCAD_PROMIS_ARRAY
ANVIL_CCDG_BROAD_NP_EPILEPSY_ZAFAGN_DS-EPI-COMO-MDS_WES
ANVIL_CCDG_BAYLOR_CVD_EOCAD_BIOME_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_GOETHE_ASD_EXOME
ANVIL_CCDG_BROAD_NP_EPILEPSY_HRVUZG_HMB_MDS_WES
ANVIL_CCDG_NYGC_NP_ALZ_WHICAP_WGS
ANVIL_CCDG_BROAD_AI_IBD_DALY_XAVIER_PRISM_WES
ANVIL_CCDG_WASHU_CVD-NP-AI_CONTROLS_VCCONTROLS_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_MCPARTLAND_ASD_EXOME
ANVIL_CCDG_NYGC_NP_AUTISM_HMCA_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_PERSICO_ASD_EXOME
ANVIL_CCDG_BROAD_CVD_EOCAD_PROMIS_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_JPNFKA_GRU_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_BRUSCO_ASD_EXOME
ANVIL_CCDG_BROAD_AI_IBD_DALY_HYAMS_PROTECT_WES
ANVIL_CCDG_BROAD_CVD_AFIB_VANDERBILT-ABLATION_WGS
ANVIL_CCDG_BROAD_AI_IBD_BRANT_HMB_WGS
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_PARELLADA_ASD_EXOME
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_SIMONS_ASD_EXOME_SVIP
ANVIL_CCDG_BROAD_NP_EPILEPSY_NZLUTO_EPIL_BC_ID_MDS_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAMON_GRU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_GBRUNL_EP_ETIOLOGY_MDS_WES
ANVIL_CCDG_BROAD_CVD_STROKE_BRAVE_WGS
ANVIL_CCDG_WASHU_CVD_EOCAD_EMERGE_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_USACCF_HMB-MDS_WES
ANVIL_CCDG_ASC_NDD_DALY_TALKOWSKI_MINSHEW_ASD_EXOME
ANVIL_CCDG_WASHU_CVD_EOCAD_DUKE_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_GBRUCL_DS_EARET_MDS_WES
ANVIL_CCDG_BROAD_AI_IBD_DALY_FRANCHIMONT_WES
ANVIL_CCDG_WASHU_CVD_EOCAD_CLEVELAND_WGS
ANVIL_CCDG_BROAD_CVD_AFIB_DUKE_WGS
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAMON_GRU_GSRS_WES
ANVIL_CCDG_NYGC_NP_AUTISM_AGRE_WGS
ANVIL_CCDG_BAYLOR_CVD_ARIC
ANVIL_CCDG_BAYLOR_CVD_AFIB_GRONINGEN_WGS
ANVIL_CCDG_BROAD_AI_IBD_DALY_STAMPFER_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_USAHEP_GRU_WES
ANVIL_CCDG_BROAD_NP_EPILEPSY_ITAICB_HMB_NPU_MDS_WES
ANVIL_CCDG_BROAD_DEPOSIT
```



